function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e,n=document.querySelector(".game-score"),o=document.querySelector(".high-score"),a=document.querySelector(".start"),i=document.querySelector(".restart"),c=document.querySelector(".message-win"),u=document.querySelector(".message-lose"),l=document.querySelector(".message-start"),f=!1,s=0,d=t(document.querySelectorAll(".field-cell")),v=localStorage.getItem("highScore");window.onload=function(){v?o.textContent=v:o.textContent=0},a.addEventListener("click",function(){h(),l.classList.add("hidden"),u.classList.add("hidden"),i.classList.remove("hidden"),a.classList.add("hidden")}),i.addEventListener("click",function(){c.classList.add("hidden"),u.classList.add("hidden"),s>v&&(o.textContent=s,localStorage.setItem("highScore",s)),s=0,n.textContent=s,h()});var h=function(){e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var r=0;r<4;r++)for(var t=0;t<4;t++){var n=e[r][t];m(d[4*r+t],n)}x(),x()},m=function(r,t){r.textContent="",r.classList.value="",r.classList.add("field-cell"),t>0&&(r.textContent=t.toString(),t<2048&&r.classList.add("field-cell--".concat(t.toString()))),2048===t&&(f=!0,c.classList.remove("hidden"))};document.addEventListener("keyup",function(r){"ArrowLeft"===r.code?S()&&x():"ArrowRight"===r.code?L()&&x():"ArrowUp"===r.code?p()&&x():"ArrowDown"===r.code&&A()&&x()});var g=function(r){return r.filter(function(r){return 0!==r})},y=function(r){for(var t=g(r),e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,t[e+1]=0,s+=t[e],n.textContent=s);for(t=g(t);t.length<4;)t.push(0);return t},S=function(){for(var r=!1,t=0;t<4;t++){var n=e[t],o=y(n);b(n,o)||(r=!0),e[t]=o;for(var a=0;a<4;a++){var i=e[t][a];m(d[4*t+a],i)}}return r},L=function(){for(var r=!1,n=0;n<4;n++){var o=e[n],a=t(o),i=y(o.reverse()).slice().reverse();b(a,i)||(r=!0),e[n]=i;for(var c=0;c<4;c++){var u=e[n][c];m(d[4*n+c],u)}}return r},p=function(){for(var r=!1,t=0;t<4;t++){var n=[e[0][t],e[1][t],e[2][t],e[3][t]],o=y(n);b(n,o)||(r=!0);for(var a=0;a<4;a++){e[a][t]=o[a];var i=e[a][t];m(d[4*a+t],i)}}return r},A=function(){for(var r=!1,n=0;n<4;n++){var o=[e[0][n],e[1][n],e[2][n],e[3][n]],a=t(o),i=y(o.reverse()).slice().reverse();b(a,i)||(r=!0);for(var c=0;c<4;c++){e[c][n]=i[c];var u=e[c][n];m(d[4*c+n],u)}}return r},b=function(r,t){if(r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0},w=function(){for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(0===e[r][t])return!0;return!1},C=function(){for(var r=0;r<4;r++)for(var t=0;t<3;t++)if(e[r][t]===e[r][t+1])return!1;return!0},q=function(){for(var r=0;r<3;r++)for(var t=0;t<4;t++)if(e[r][t]===e[r+1][t])return!1;return!0},x=function(){if(w())for(var r=!1;!r&&!f;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());0===e[t][n]&&(e[t][n]=Math.random()>.9?4:2,m(d[4*t+n],e[t][n]),r=!0),2048===e[t][n]&&(f=!0),!w()&&C()&&q()&&(u.classList.remove("hidden"),s>o.value&&(o.textContent=s,localStorage.setItem("highScore",s)))}};
//# sourceMappingURL=index.98257aba.js.map
